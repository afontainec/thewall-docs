<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Defining Chinchay Codes | Chinchay Docs</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.ab30e0ca.css" as="style"><link rel="preload" href="/assets/js/app.2773cf3e.js" as="script"><link rel="preload" href="/assets/js/2.3f720234.js" as="script"><link rel="preload" href="/assets/js/19.aa8171a6.js" as="script"><link rel="prefetch" href="/assets/js/10.1edc54dd.js"><link rel="prefetch" href="/assets/js/11.2f00b1d8.js"><link rel="prefetch" href="/assets/js/12.1f05b6b4.js"><link rel="prefetch" href="/assets/js/13.c98ba095.js"><link rel="prefetch" href="/assets/js/14.1b2b2c75.js"><link rel="prefetch" href="/assets/js/15.702d946e.js"><link rel="prefetch" href="/assets/js/16.a41c1694.js"><link rel="prefetch" href="/assets/js/17.335d4649.js"><link rel="prefetch" href="/assets/js/18.23ce0973.js"><link rel="prefetch" href="/assets/js/20.fcee7802.js"><link rel="prefetch" href="/assets/js/21.84451ad4.js"><link rel="prefetch" href="/assets/js/22.ca5d3982.js"><link rel="prefetch" href="/assets/js/23.d5279137.js"><link rel="prefetch" href="/assets/js/24.41953457.js"><link rel="prefetch" href="/assets/js/25.6f8b54bd.js"><link rel="prefetch" href="/assets/js/26.9965863d.js"><link rel="prefetch" href="/assets/js/27.5c297913.js"><link rel="prefetch" href="/assets/js/28.cc8160a1.js"><link rel="prefetch" href="/assets/js/29.3a7bb5f9.js"><link rel="prefetch" href="/assets/js/3.6a2b7fa3.js"><link rel="prefetch" href="/assets/js/30.42d9cb16.js"><link rel="prefetch" href="/assets/js/31.071fae85.js"><link rel="prefetch" href="/assets/js/32.9325ffa2.js"><link rel="prefetch" href="/assets/js/33.4af5988e.js"><link rel="prefetch" href="/assets/js/34.c865156d.js"><link rel="prefetch" href="/assets/js/35.d3ce8ef4.js"><link rel="prefetch" href="/assets/js/36.11f74532.js"><link rel="prefetch" href="/assets/js/4.1b09c2c5.js"><link rel="prefetch" href="/assets/js/5.5c4c1fbb.js"><link rel="prefetch" href="/assets/js/6.b0461825.js"><link rel="prefetch" href="/assets/js/7.3211b211.js"><link rel="prefetch" href="/assets/js/8.a7dcf5bf.js"><link rel="prefetch" href="/assets/js/9.0aa8bee1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ab30e0ca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Chinchay Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/gettingstarted/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/docs/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="/models/" class="nav-link">
  The Model
</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">
  Middleware
</a></div><div class="nav-item"><a href="/errorhandler/" class="nav-link router-link-active">
  Error Handler
</a></div><div class="nav-item"><a href="/collaborate/" class="nav-link">
  Collaborate!
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/gettingstarted/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/docs/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="/models/" class="nav-link">
  The Model
</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">
  Middleware
</a></div><div class="nav-item"><a href="/errorhandler/" class="nav-link router-link-active">
  Error Handler
</a></div><div class="nav-item"><a href="/collaborate/" class="nav-link">
  Collaborate!
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/errorhandler/chinchay-error.html" class="sidebar-link">ChinchayError</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/errorhandler/chinchay-error.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/errorhandler/chinchay-error.html#chinchaycode" class="sidebar-link">chinchayCode</a></li><li class="sidebar-sub-header"><a href="/errorhandler/chinchay-error.html#message" class="sidebar-link">Message</a></li><li class="sidebar-sub-header"><a href="/errorhandler/chinchay-error.html#map-to-another-error" class="sidebar-link">Map to Another Error</a></li></ul></li><li><a href="/errorhandler/error-handler.html" class="sidebar-link">ErrorHandler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/errorhandler/error-handler.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/errorhandler/error-handler.html#examples" class="sidebar-link">examples</a></li><li class="sidebar-sub-header"><a href="/errorhandler/error-handler.html#errortranslate" class="sidebar-link">errorTranslate</a></li><li class="sidebar-sub-header"><a href="/errorhandler/error-handler.html#gethttpcodeandmessage" class="sidebar-link">getHTTPCodeAndMessage</a></li></ul></li><li><a href="/errorhandler/good-practices.html" aria-current="page" class="active sidebar-link">GoodPractices</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/errorhandler/good-practices.html#defining-chinchay-codes" class="sidebar-link">Defining Chinchay Codes</a></li><li class="sidebar-sub-header"><a href="/errorhandler/good-practices.html#global-errorhandler" class="sidebar-link">Global ErrorHandler</a></li><li class="sidebar-sub-header"><a href="/errorhandler/good-practices.html#http-codes-guide" class="sidebar-link">HTTP Codes guide</a></li><li class="sidebar-sub-header"><a href="/errorhandler/good-practices.html#developer-alert" class="sidebar-link">Developer Alert</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="defining-chinchay-codes"><a href="#defining-chinchay-codes" class="header-anchor">#</a> Defining Chinchay Codes</h2> <p>One big question is how to build Chinchay Codes? Let's keep in mind that the <code>chinchayCode</code> is intended to be machine-readable, therefore it is not necessary for it to be self explanatory, so keep it short. One tempting option is to number them, error 1, error 2, and so forth. However I would advise against that option, even though it is not intended for it to be easily understood by humans, it does not mean it has to be crazy difficult. I would suggest something that would give a hint of what happened. Some examples:</p> <h4 id="don-ts"><a href="#don-ts" class="header-anchor">#</a> don'ts</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">1</span> <span class="token comment">// avoid numbering</span>
<span class="token string">'0x13'</span> <span class="token comment">// I know hex can look pro, but again avoid numbering</span>
<span class="token string">'error when the parameter given does not match with an existing one'</span> <span class="token comment">// too long, too much bla bla </span>
</code></pre></div><h4 id="do-s"><a href="#do-s" class="header-anchor">#</a> do's</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'unexistant_parameter'</span>
<span class="token string">'id_not_found'</span>
<span class="token string">'incorrect_format'</span>
<span class="token string">'emptyData'</span> <span class="token comment">// can be camelcase or your case of preference. For these errors I tend to go for snake cases though.</span>
</code></pre></div><h3 id="recycling-chinchaycode"><a href="#recycling-chinchaycode" class="header-anchor">#</a> Recycling chinchayCode</h3> <p>A common question is should I create a different <code>chinchayCode</code> for every possible Error or should I reuse them?</p> <p>It truly depends on the case. Keep in mind that the mission here is to give to the client the correct and understandable messages. So do not try to over optimize the chinchayCodes. However if two errors are very similar, will have the same message and the same code, well yeah, then please do recycle! This will maintain a shorter <code>errorTranslate</code>, easier to read or debug.</p> <h2 id="global-errorhandler"><a href="#global-errorhandler" class="header-anchor">#</a> Global ErrorHandler</h2> <p>One interesting way of organizing the ErrorHandler is to have 1 errorHandler for the whole project. In one file, <code>errorhandlerfile.js</code> we will store the <code>errorTranslate</code> parameter:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    empty_update<span class="token operator">:</span> <span class="token punctuation">{</span>
      code<span class="token operator">:</span> <span class="token number">422</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">'Could not be processed.'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    no_access<span class="token operator">:</span> <span class="token punctuation">{</span>
      code<span class="token operator">:</span> <span class="token number">403</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'Forbidden. You can not access the requested data.'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
    unexistant_option<span class="token operator">:</span> <span class="token punctuation">{</span>
      code<span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'Requested option is not valid.'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Then, in another file, let's call it <code>errorhandler.js</code>, we add the following:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">const</span> errorTranslate <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path/to/errorhandlerfile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> ErrorHandler <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chinchay'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> errorHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorHandler</span><span class="token punctuation">(</span>errorTranslate<span class="token punctuation">)</span><span class="token punctuation">;</span>

  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> errorHandler<span class="token punctuation">;</span>
</code></pre></div><p>Lastly, in each controller we replace:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Table<span class="token punctuation">,</span> ErrorHandler <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chinchay'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> errorHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>with:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">const</span> errorHandler <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path/to/errorhandler'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="pros"><a href="#pros" class="header-anchor">#</a> pros</h4> <p>The main reason to use it this way is because the <code>errorTranslate</code> parameter requires spaces. If you have a complete mapping of errors, your controllers will end up being more errorTranslate than controller. This looks ugly.</p> <p>Moreover, it is quite common for controllers to have very similar <code>errorTranslate</code>. This will lead to a lot of copy/pasting. In the long run this is hell, imagine you have 10 controllers and you found one new Error you haven't thought about before. Even worse, this error can happen in every controller, you will have to add it to the 10 controllers. With a centralized errorHandler it is just one change.</p> <h4 id="cons"><a href="#cons" class="header-anchor">#</a> cons</h4> <p>You lose flexibility. You might want to return different messages for the same error depending on the controller (you could be interested in returning different http status codes as well, but that is less common).</p> <h2 id="http-codes-guide"><a href="#http-codes-guide" class="header-anchor">#</a> HTTP Codes guide</h2> <p>Here is a quick guide of the codes I use and when I use them.</p> <h3 id="_200"><a href="#_200" class="header-anchor">#</a> 200</h3> <p>Success, when everything goes as expected.</p> <h3 id="_400"><a href="#_400" class="header-anchor">#</a> 400</h3> <p>This is basically a &quot;it's not my fault&quot; code. Whenever an error is thrown because the client made a weird request.</p> <h3 id="_401"><a href="#_401" class="header-anchor">#</a> 401</h3> <p>401 the user is not authorized. The user must give a valid Authorization header field.</p> <h3 id="_403"><a href="#_403" class="header-anchor">#</a> 403</h3> <p>Forbidden. The user does not have access to the requested data.</p> <h3 id="_404"><a href="#_404" class="header-anchor">#</a> 404</h3> <p>Not Found. What you are looking for has not been found.</p> <h3 id="_500"><a href="#_500" class="header-anchor">#</a> 500</h3> <p>This is basically &quot;not a clue what happened&quot;. It officially means &quot;Internal Server Error&quot;, but it is usually used as something we did not expect to happens, did occur.</p> <h3 id="and-more"><a href="#and-more" class="header-anchor">#</a> And More</h3> <p>There are plenty of more errors, here is a <a href="https://www.restapitutorial.com/httpstatuscodes.html" target="_blank" rel="noopener noreferrer">complete list<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="developer-alert"><a href="#developer-alert" class="header-anchor">#</a> Developer Alert</h2> <p>If you are deploying to production it's a must to monitor the health of your server. This will let you know when something unexpected happen and act accordingly. There are plenty of tools to monitor the health of your code and let you know whenever a code 4XX or 5XX occurs, amount of requests, CPU usage, logs analyzers and much more.</p> <p>In my experience, I usually do not do much error handling at the beginning, just the basic and obvious errors. All the rest I just return 500 and place an alert that would notify me everytime an error 500 occurs. When this alert triggers, I then analyze the request, see what happened and what would be the correct code and message, add it to the errorHandler and move on. This allows me to only populate the errorHandler with real cases, rather than overthinking everything that can go wrong.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/errorhandler/error-handler.html" class="prev">
        ErrorHandler
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2773cf3e.js" defer></script><script src="/assets/js/2.3f720234.js" defer></script><script src="/assets/js/19.aa8171a6.js" defer></script>
  </body>
</html>
